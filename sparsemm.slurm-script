#!/bin/csh
#SBATCH --job-name="test"
#SBATCH -o myscript.%A.out
#SBATCH -e myscript.%A.err
#SBATCH -p par7.q
#SBATCH --cpus-per-task=24
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH -t 00:30:00
#SBATCH --exclusive
#SBATCH --mail-user=william.e.elias@durham.ac.uk
#SBATCH --mail-type=ALL

module purge
module load intel/xe_2018.2
source /ddn/apps/Cluster-Apps/intel/xe_2018.2/vtune_amplifier/amplxe-vars.sh
source /ddn/apps/Cluster-Apps/intel/xe_2018.2/advisor/advixe-vars.sh
module load likwid/4.1


# advixe-cl -collect roofline -- ./binary ./sparsemm result.matrix ../large-matrices/DG3-ip-laplace-2D.matrix ../large-matrices/DG3-mass-2D.matrix
amplxe-cl ./sparsemm result.matrix ../large-matrices/DG3-ip-laplace-2D.matrix ../large-matrices/DG3-mass-2D.matrix
